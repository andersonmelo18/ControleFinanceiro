<!doctype html>
<html lang="pt-BR">
<head>
ย ย <meta charset="utf-8">
ย ย <meta name="viewport" content="width=device-width,initial-scale=1">
ย ย <title>Painel โ Controle Financeiro Autรดnomo</title>

ย ย <link rel="stylesheet" href="style.css">
ย ย <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
ย ย <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

ย ย ย ย <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
ย ย <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script> ย ย <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

ย ย <script>
ย ย ย const firebaseConfig = {
ย ย ย ย apiKey: "AIzaSyBXCMMXEM-e_BNftJNcm6XeEGZ7KYPUiAY",
ย ย ย ย authDomain: "controle-financeiro-b7880.firebaseapp.com",
ย ย ย ย databaseURL: "https://controle-financeiro-b7880-default-rtdb.firebaseio.com",
ย ย ย ย projectId: "controle-financeiro-b7880",
ย ย ย ย storageBucket: "controle-financeiro-b7880.firebasestorage.app",
ย ย ย ย messagingSenderId: "149823899793",
ย ย ย ย appId: "1:149823899793:web:0fcdcd8ece6748697e9730"
ย ย ย };

ย ย ย // Inicializa o Firebase (App, Auth e DB)
ย ย ย const app = firebase.initializeApp(firebaseConfig);
ย ย ย const db = app.database();
ย ย </script>
</head>
<body>
ย ย <div id="auth-overlay" style="position:fixed; top:0; left:0; width:100%; height:100%; background:white; z-index:100; display:flex; justify-content:center; align-items:center;">
ย ย ย ย <div style="max-width:300px; padding: 20px; border: 1px solid #ccc; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
ย ย ย ย ย ย <div id="auth-section">
ย ย ย ย ย ย ย ย </div>
ย ย ย ย </div>
ย ย </div>
ย ย ย ย <div class="container" style="display: none;"> 
ย ย ย ย 
        <!-- NOVO CABEรALHO ADICIONADO AQUI -->
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 15px; padding-top: 10px; border-bottom: 1px solid #333;">
            <h1 id="user-display" style="font-size: 16px; margin: 0; color: var(--cor-destaque); font-weight: 500;">Carregando Usuรกrio...</h1>
            <button class="submit-btn" onclick="handleLogout()" style="padding: 5px 10px; font-size: 12px; background-color: var(--cor-erro);">Sair (Logout)</button>
        </div>
        <!-- FIM DO NOVO CABEรALHO -->
        
ย ย ย ย <div class="nav-tabs">
ย ย ย ย ย ย <a href="index.html"><button class="tab-button active">๐ Painel</button></a>
ย ย ย ย ย ย <a href="entradas.html"><button class="tab-button">โก๏ธ Entradas</button></a>
ย ย ย ย ย ย <a href="despesas.html"><button class="tab-button">โฌ๏ธ Despesas</button></a>
ย ย ย ย ย ย <a href="fixos.html"><button class="tab-button">๐ Fixos/Dรญvidas</button></a>
ย ย ย ย ย ย <a href="cartoes.html"><button class="tab-button">๐ณ Cartรตes</button></a>
ย ย ย ย </div>

ย ย ย ย <div id="dashboard-tab" class="tab-content" style="display:block">
ย ย ย ย ย ย <div class="month-selector">
ย ย ย ย ย ย ย ย <button onclick="changeMonth(-1)">&#9664;</button>
ย ย ย ย ย ย ย ย <h2 id="current-month-display"></h2>
ย ย ย ย ย ย ย ย <button onclick="changeMonth(1)">&#9654;</button>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย <div class="dashboard-grid">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div id="total-entradas" class="card">
ย ย ย ย ย ย ย ย ย ย <h4>โฌ๏ธ Total Entradas</h4>
ย ย ย ย ย ย ย ย ย ย <div class="value">R$ 0,00</div>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย <div id="total-despesas" class="card">
ย ย ย ย ย ย ย ย ย ย <h4>โฌ๏ธ Total Despesas</h4>
ย ย ย ย ย ย ย ย ย ย <div class="value">R$ 0,00</div>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย <div id="lucro-liquido" class="card full-width">
ย ย ย ย ย ย ย ย ย ย <h4>๐ฏ Lucro Lรญquido</h4>
ย ย ย ย ย ย ย ย ย ย <div class="value">R$ 0,00</div>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย <div id="saldo-caixa" class="card full-width">
ย ย ย ย ย ย ย ย ย ย <h4>๐๏ธ Saldo em Caixa (Dinheiro/PIX)</h4>
ย ย ย ย ย ย ย ย ย ย <div class="value">R$ 0,00</div>
ย ย ย ย ย ย ย ย ย ย <p class="small" style="margin:5px 0 0"></p>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย <div class="card">
ย ย ย ย ย ย ย ย ย ย <h4>Km Total</h4>
ย ย ย ย ย ย ย ย ย ย <div id="total-km" class="value">0 km</div>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย <div class="card">
ย ย ย ย ย ย ย ย ย ย <h4>Horas Total</h4>
ย ย ย ย ย ย ย ย ย ย <div id="total-hours" class="value">0 h</div>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย <div class="card-control-section">
ย ย ย ย ย ย ย ย <h3>๐ Detalhamento de Despesas (Geral)</h3>
ย ย ย ย ย ย ย ย <div class="card-item"><span>Despesas Variรกveis</span><span id="var-exp-value" style="font-weight:bold;color:var(--cor-erro)">R$ 0,00</span></div>
ย ย ย ย ย ย ย ย <div class="card-item"><span>Despesas Fixas e Dรญvidas</span><span id="fix-exp-value" style="font-weight:bold;color:var(--cor-erro)">R$ 0,00</span></div>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย <div style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;">
ย ย ย ย ย ย ย ย <button id="export-csv-btn" class="submit-btn">Exportar CSV (Excel)</button>
ย ย ย ย ย ย ย ย <button id="export-pdf-btn" class="submit-btn">Exportar PDF</button>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย <div style="display:flex; gap:12px; margin-top:12px; flex-direction:column;">
ย ย ย ย ย ย ย ย <div class="card" style="min-height:260px;">
ย ย ย ย ย ย ย ย ย ย <h4>Grรกfico โ Receitas vs Despesas</h4>
ย ย ย ย ย ย ย ย ย ย <div style="height:200px;"><canvas id="chart-donut"></canvas></div>
ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย <div class="card" style="min-height:260px;">
ย ย ย ย ย ย ย ย ย ย <h4>Gastos por Categoria</h4>
ย ย ย ย ย ย ย ย ย ย <div style="height:220px"><canvas id="chart-bar"></canvas></div>
ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย <div class="card">
ย ย ย ย ย ย ย ย ย ย <h4>Resumo Mensal</h4>
ย ย ย ย ย ย ย ย ย ย <div id="monthly-summary-table"></div>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย </div>
ย ย ย ย </div>

ย ย </div>

ย ย <script src="script.js"></script>
</body>
</html>